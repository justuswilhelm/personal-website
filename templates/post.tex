% Options for packages loaded elsewhere
\PassOptionsToPackage{hyphens}{url}

\PassOptionsToPackage{dvipsnames,svgnames*,x11names*}{xcolor}
%
\documentclass[
]{article}
\usepackage{amssymb}
\usepackage{amsmath}
\usepackage{graphicx}
% Derived from https://tex.stackexchange.com/a/160022
% Shared under CC BY-SA 3.0
% Redefine \includegraphics so that, unless explicit options are
% given, the image width will not exceed the width or the height of the page.
% Images get their normal width if they fit onto the page, but
% are scaled down if they would overflow the margins.
\makeatletter
\def\ScaleWidthIfNeeded{%
 \ifdim\Gin@nat@width>\linewidth
    \linewidth
  \else
    \Gin@nat@width
  \fi
}
\def\ScaleHeightIfNeeded{%
  \ifdim\Gin@nat@height>0.9\textheight
    0.9\textheight
  \else
    \Gin@nat@width
  \fi
}
\makeatother

\setkeys{Gin}{width=\ScaleWidthIfNeeded,height=\ScaleHeightIfNeeded,keepaspectratio}%
\usepackage{unicode-math}

\defaultfontfeatures{Scale=MatchLowercase}
\defaultfontfeatures[\rmfamily]{Ligatures=TeX,Scale=1}

\usepackage{xeCJK}
\setCJKmainfont{NotoSansJP}[
  Path=fonts/NotoSans/,
  UprightFont=*-Regular,
  Extension=.otf,
]
\usepackage{xcolor}
\usepackage[
  colorlinks=true,
  linkcolor=Maroon,
  filecolor=Maroon,
  citecolor=Blue,
  urlcolor=Blue,
]{hyperref}
\urlstyle{same} % disable monospaced font for URLs
\usepackage[margin=2cm]{geometry}
\usepackage{listings}
\newcommand{\passthrough}[1]{#1}
\lstset{defaultdialect=[5.3]Lua}
$highlighting-macros$
\usepackage{longtable,booktabs,array}
\usepackage{calc}
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
\setcounter{secnumdepth}{3}

\title{$title$}
\author{$author$}
\date{$date$}

\begin{document}
\maketitle

{
\hypersetup{}
\setcounter{tocdepth}{$toc-depth$}
\tableofcontents
}

$body$

% TODO clean this up somehow and remove the if
$if(lot)$
\listoftables
$endif$
$if(lof)$
\listoffigures
$endif$

\end{document}
